<%- include('partials/header.ejs') %>

    <link rel="stylesheet" href="/css/index.css">


    <body>

        <%- include('partials/navbar.ejs') %>


            <div class="row">

                <div class="col-2">

                    <%- include('partials/sidebar.ejs') %>

                </div>

                <div class="col-8">


                    <h2 class="mt-3">Tarefas <a class="list-item" href=""><img
                                src="/img/icons8-soma-24.png">Adicionar</a></h2>


                    <hr>

                    

                    <div class="container">


                        <% tasks.forEach(task=> { %>

                            
                            <% if ( task.checked == false) { %>


                                <div class="input-group mb-3">

                                    
                                
                                    <span class="input-group-text">

                                        <input onclick="check(<%- task.id %>)"  class="form-check-input"
                                            type="checkbox" value="<%- task.id %>" id="flexCheckDefault">
                                       
                                    </span>
    
                                    <input type="hidden" name="id" value="<%- task.id %>">
    
                                    <input type="text" class="task form-control" value="<%- task.title %>">
    
                                    <span class="input-group-text">
    
                                        <form method="post" action="/task/delete">
    
                                            <input type="hidden" name="id" value="<%- task.id %>">
                                            
                                            <button class="btn">
                                                X
                                            </button>

                                        </form>
    
                                    </span>
                                  </div>

                            <% } %>

                        <% }) %>

                            <hr>


                            <!-- Pegar id da lista para criar tarefa -->
                            <input type="hidden" name="slug" value="<%- list.slug %>">


                            <form id="add-task" method="POST" action="/task/save/<%- list.slug %>/<%- list.id %>">

                                <div class="input-group mb-3">

                                    <input name="title" type="text" class="form-control" placeholder=""
                                        aria-label="Example text with button addon"
                                        aria-describedby="button-addon1">
                                    <button onclick="document.querySelector('#add-task').submit()"" class=" btn
                                            btn-outline-secondary" type="button" id="button-addon1">
                                            Adicionar
                                    </button>
                                </div>

                            </form>


                            <hr>

                        <% tasks.forEach(task=> { %>

                            <% if (task.checked) { %>

                                <form id="form-check" method="post" action="/task/check">
                                
                                    <input type="hidden" name="id" value="<%- task.id %>">
    
                                </form>

                                <div class="input-group mb-3">
                                
                                    <span class="input-group-text">
                                        <input onclick="document.querySelector('#form-check').submit()" class="form-check-input"
                                        type="checkbox" value="" id="flexCheckCheckedDisabled" checked disabled>
                                    </span>

                                    
                                    <input type="hidden" name="id" value="<%- task.id %>">

                                    <input type="text" class="task form-control" value="<%- task.title %>">
    
    
                                    <span class="input-group-text">
    
                                        <form method="post" action="/task/delete">
    
                                            <input type="hidden" name="id" value="<%- task.id %>">
                                            
                                            <button class="btn">
                                                X
                                            </button>
                                            
                                        </form>
    
                                    </span>
                                  </div>


                            <% } %>

                        <% }) %>

                        

                            


                    </div>







                </div>

            </div>




    </body>

    <script>

        function check(id) {

            window.location.href = "/task/check/" + id;
        }

    </script>


<%- include('partials/footer.ejs') %>